# Dynatrace MCP Server å¯è§‚æµ‹èƒ½åŠ›æ¸…å• v0.12.0

## ç¬¬ä¸€éƒ¨åˆ†ï¼šå®Œæ•´èƒ½åŠ›æ¸…å•è¡¨æ ¼

### 1. Tools èƒ½åŠ›

| èƒ½åŠ›æ¨¡å—       | å…·ä½“åŠŸèƒ½é¡¹           | æ˜¯å¦æ”¯æŒ | è¯¦ç»†è¯´æ˜                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ç‰ˆæœ¬é™åˆ¶     | å®˜æ–¹æ–‡æ¡£é“¾æ¥                                                                                          |
| ---------- | --------------- | ---- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ----------------------------------------------------------------------------------------------- |
| **åŸºç¡€å·¥å…·æ•°é‡** | å·¥å…·æ€»æ•°            | âœ…    | **16ä¸ªå†…ç½®å·¥å…·**ï¼š<br>1. get_environment_info ([index.ts:309-329](../Code/dynatrace-mcp/src/index.ts#L309-L329))<br>2. list_vulnerabilities ([list-vulnerabilities.ts:1-51](../Code/dynatrace-mcp/src/capabilities/list-vulnerabilities.ts#L1-L51))<br>3. list_problems ([list-problems.ts:1-49](../Code/dynatrace-mcp/src/capabilities/list-problems.ts#L1-L49))<br>4. find_entity_by_name ([find-monitored-entity-by-name.ts:1-78](../Code/dynatrace-mcp/src/capabilities/find-monitored-entity-by-name.ts#L1-L78))<br>5. execute_dql ([execute-dql.ts:1-148](../Code/dynatrace-mcp/src/capabilities/execute-dql.ts#L1-L148))<br>6. verify_dql ([execute-dql.ts:6-16](../Code/dynatrace-mcp/src/capabilities/execute-dql.ts#L6-L16))<br>7. generate_dql_from_natural_language ([davis-copilot.ts:60-66](../Code/dynatrace-mcp/src/capabilities/davis-copilot.ts#L60-L66))<br>8. explain_dql_in_natural_language ([davis-copilot.ts:74-80](../Code/dynatrace-mcp/src/capabilities/davis-copilot.ts#L74-L80))<br>9. chat_with_davis_copilot ([davis-copilot.ts:82-109](../Code/dynatrace-mcp/src/capabilities/davis-copilot.ts#L82-L109))<br>10. send_slack_message ([send-slack-message.ts:1-26](../Code/dynatrace-mcp/src/capabilities/send-slack-message.ts#L1-L26))<br>11. send_email ([send-email.ts:1-104](../Code/dynatrace-mcp/src/capabilities/send-email.ts#L1-L104))<br>12. create_workflow_for_notification ([create-workflow-for-problem-notification.ts:1-112](../Code/dynatrace-mcp/src/capabilities/create-workflow-for-problem-notification.ts#L1-L112))<br>13. make_workflow_public ([update-workflow.ts:1-11](../Code/dynatrace-mcp/src/capabilities/update-workflow.ts#L1-L11))<br>14. get_kubernetes_events ([get-events-for-cluster.ts:1-29](../Code/dynatrace-mcp/src/capabilities/get-events-for-cluster.ts#L1-L29))<br>15. get_ownership ([get-ownership-information.ts:1-19](../Code/dynatrace-mcp/src/capabilities/get-ownership-information.ts#L1-L19))<br>16. reset_grail_budget ([grail-budget-tracker.ts](../Code/dynatrace-mcp/src/utils/grail-budget-tracker.ts)) | v0.12.0+ | [README#Capabilities](../Code/dynatrace-mcp/README.md#capabilities)              |
| **å‚æ•°éªŒè¯**   | Zod Schema éªŒè¯   | âœ…    | - åŸºäº Zod åº“è¿›è¡Œè¿è¡Œæ—¶ç±»å‹éªŒè¯<br>- è‡ªåŠ¨ç”Ÿæˆ JSON Schema<br>- æ”¯æŒå¯é€‰å‚æ•°ã€é»˜è®¤å€¼ã€æšä¸¾ç±»å‹<br>- éªŒè¯å¤±è´¥è¿”å›æ˜ç¡®é”™è¯¯ä¿¡æ¯                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | v0.1.0+  | [index.ts#L224-L270](../Code/dynatrace-mcp/src/index.ts#L224-L270) |
| **å¹¶è¡Œè°ƒç”¨æ”¯æŒ** | å¤šå·¥å…·å¹¶å‘           | âœ…    | - ç†è®ºä¸Šæ”¯æŒæ— é™å¹¶å‘ï¼ˆå—é™äº Node.js äº‹ä»¶å¾ªç¯ï¼‰<br>- HTTP æ¨¡å¼ï¼šæ¯ä¸ªè¯·æ±‚ç‹¬ç«‹å¤„ç†<br>- stdio æ¨¡å¼ï¼šé¡ºåºå¤„ç†ï¼ˆå•è¿æ¥é™åˆ¶ï¼‰<br>- æ— å†…ç½®å¹¶å‘æ•°é™åˆ¶                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | v0.1.0+  | N/A                                                                                             |
| **æµå¼å¤„ç†**   | Streaming API   | âŒ    | - DQL æŸ¥è¯¢ç»“æœéæµå¼è¿”å›<br>- ä½¿ç”¨è½®è¯¢æœºåˆ¶ï¼ˆ2ç§’é—´éš”ï¼‰æ£€æŸ¥é•¿æŸ¥è¯¢çŠ¶æ€<br>- æœªæ¥å¯èƒ½é€šè¿‡ MCP SSE ä¼ è¾“æ”¯æŒ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | N/A      | N/A                                                                                             |
| **é”™è¯¯å¤„ç†æœºåˆ¶** | ç»Ÿä¸€é”™è¯¯å¤„ç†          | âœ…    | **é”™è¯¯ç±»å‹**ï¼š<br>1. ClientRequestErrorï¼ˆDynatrace API é”™è¯¯ï¼‰<br>2. è®¤è¯é”™è¯¯ï¼ˆOAuth/Token å¤±æ•ˆï¼‰<br>3. é¢„ç®—è¶…é™é”™è¯¯ï¼ˆGrail æˆæœ¬æ§åˆ¶ï¼‰<br>4. å‚æ•°éªŒè¯é”™è¯¯ï¼ˆZod æ ¡éªŒå¤±è´¥ï¼‰<br>5. ç½‘ç»œè¶…æ—¶é”™è¯¯<br><br>**é™çº§ç­–ç•¥**ï¼š<br>- OAuth ä»¤ç‰Œè‡ªåŠ¨åˆ·æ–°<br>- DQL æŸ¥è¯¢å¤±è´¥è¿”å›è¯¦ç»†é”™è¯¯ä¿¡æ¯<br>- é¢„ç®—è¶…é™é˜»æ­¢æ–°æŸ¥è¯¢ï¼ˆå¯æ‰‹åŠ¨é‡ç½®ï¼‰                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | v0.1.0+  | [index.ts#L244-L260](../Code/dynatrace-mcp/src/index.ts#L244-L260) |
| **å·¥å…·æ³¨é‡Š**   | Annotations æ”¯æŒ  | âœ…    | - `readOnlyHint`: æ ‡è®°åªè¯»æ“ä½œ<br>- `idempotentHint`: æ ‡è®°å¹‚ç­‰æ“ä½œ<br>- `openWorldHint`: æ ‡è®°å¤–éƒ¨ä¸–ç•Œäº¤äº’ï¼ˆå¦‚é‚®ä»¶ã€Slackï¼‰<br>- ç”¨äº AI æ¨¡å‹ç†è§£å·¥å…·å‰¯ä½œç”¨                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | v0.8.0+  | [MCP Spec](https://modelcontextprotocol.io/docs/concepts/tools)                                 |
| **äººå·¥å®¡æ‰¹**   | Elicitation API | âœ…    | **éœ€å®¡æ‰¹çš„æ“ä½œ**ï¼š<br>- send_slack_message<br>- send_email<br>- create_workflow_for_notification<br>- make_workflow_public<br><br>é€šè¿‡ MCP Elicitation API è¯·æ±‚ç”¨æˆ·ç¡®è®¤                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | v0.10.0+ | [README#L568-L580](../Code/dynatrace-mcp/README.md#L568-L580)          |

### 2. Resources ç®¡ç†

| èƒ½åŠ›æ¨¡å— | å…·ä½“åŠŸèƒ½é¡¹ | æ˜¯å¦æ”¯æŒ | è¯¦ç»†è¯´æ˜ | ç‰ˆæœ¬é™åˆ¶ | å®˜æ–¹æ–‡æ¡£é“¾æ¥ |
|----------|-----------|----------|----------|----------|-------------|
| **èµ„æºå‘ç°** | æ”¯æŒçš„èµ„æºç±»å‹ | âŒ | - Dynatrace MCP **ä¸å®ç° MCP Resources åè®®**<br>- é€šè¿‡ Tools æä¾›èµ„æºè®¿é—®ï¼ˆ`find_entity_by_name`ï¼‰<br>- æ”¯æŒçš„å®ä½“ç±»å‹ï¼šSERVICE, HOST, PROCESS_GROUP, APPLICATION, KUBERNETES_*, CUSTOM_APPLICATION ç­‰ï¼ˆ50+ ç±»å‹ï¼‰ | N/A | [Dynatrace Entity Types](https://docs.dynatrace.com/docs/manage/monitored-entities/entity-types) |
| **URIæ¨¡æ¿è®¾è®¡** | èµ„æºæ ‡è¯†ç¬¦ | âŒ | - ä¸ä½¿ç”¨ URI æ¨¡æ¿<br>- ä½¿ç”¨ Dynatrace Entity IDï¼ˆå¦‚ `SERVICE-1234567890ABCDEF`ï¼‰<br>- ä½¿ç”¨ DQL è¿‡æ»¤å™¨ï¼ˆå¦‚ `dt.entity.service == "SERVICE-123"`ï¼‰ | N/A | N/A |
| **è®¢é˜…æœºåˆ¶** | å®æ—¶æ›´æ–° | âŒ | - æ— èµ„æºè®¢é˜…åŠŸèƒ½<br>- é€šè¿‡ä¸»åŠ¨æŸ¥è¯¢ï¼ˆexecute_dqlï¼‰è·å–æ•°æ®<br>- å»ºè®®å®¢æˆ·ç«¯å®ç°è½®è¯¢é€»è¾‘ | N/A | N/A |
| **åˆ†é¡µç­–ç•¥** | ç»“æœé›†åˆ†é¡µ | âš ï¸ | - DQL æŸ¥è¯¢æ”¯æŒ `LIMIT` å’Œ `OFFSET`<br>- å·¥å…·å±‚æä¾› `recordLimit` å‚æ•°ï¼ˆé»˜è®¤ 100ï¼Œæœ€å¤§ 5000ï¼‰<br>- `maxVulnerabilitiesToDisplay`/`maxProblemsToDisplay` ç”¨äºæ§åˆ¶æ˜¾ç¤ºæ•°é‡<br>- æ— è‡ªåŠ¨åˆ†é¡µï¼Œéœ€å®¢æˆ·ç«¯å®ç° | v0.1.0+ | [execute-dql.ts](../Code/dynatrace-mcp/src/capabilities/execute-dql.ts) |

### 3. Prompts / Sampling

| èƒ½åŠ›æ¨¡å— | å…·ä½“åŠŸèƒ½é¡¹ | æ˜¯å¦æ”¯æŒ | è¯¦ç»†è¯´æ˜ | ç‰ˆæœ¬é™åˆ¶ | å®˜æ–¹æ–‡æ¡£é“¾æ¥ |
|----------|-----------|----------|----------|----------|-------------|
| **æç¤ºè¯ç®¡ç†** | MCP Prompts åè®® | âŒ | - ä¸å®ç° MCP Prompts åè®®<br>- æä¾› 30+ ç¤ºä¾‹ Prompt åœ¨ README ä¸­<br>- å»ºè®®ç”¨æˆ·é€šè¿‡ Rule Fileï¼ˆ`.github/copilot-instructions.md`ï¼‰è‡ªå®šä¹‰ | N/A | [README#Example-prompts](../Code/dynatrace-mcp/README.md#-example-prompts-) |
| **é‡‡æ ·ç­–ç•¥** | DQL æŸ¥è¯¢é‡‡æ · | âœ… | - Dynatrace Grail è‡ªåŠ¨é‡‡æ ·ï¼ˆå½“æ•°æ®é‡è¿‡å¤§æ—¶ï¼‰<br>- åœ¨æŸ¥è¯¢ç»“æœå…ƒæ•°æ®ä¸­æ ‡è®° `sampled: true`<br>- æ— æ³•æ‰‹åŠ¨æ§åˆ¶é‡‡æ ·ç‡<br>- æ¨èé€šè¿‡æ—¶é—´èŒƒå›´å’Œè¿‡æ»¤å™¨å‡å°‘æ•°æ®é‡ | v0.1.0+ | [Dynatrace Docs - Grail](https://docs.dynatrace.com/docs/discover-dynatrace/platform/grail) |
| **è‡ªå®šä¹‰èƒ½åŠ›** | çµæ´»åº¦è¯„ä¼° | âš ï¸ | - **çµæ´»åº¦ï¼šä¸­ç­‰** â˜…â˜…â˜…â˜†â˜†<br>- æ”¯æŒé€šè¿‡ Rule File è‡ªå®šä¹‰ AI è¡Œä¸º<br>- æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰é¢„ç®—ã€è¶…æ—¶ç­‰<br>- æ— è¿è¡Œæ—¶æ’ä»¶ç³»ç»Ÿ<br>- æ‰©å±•éœ€ä¿®æ”¹æºç æˆ– Fork ä»“åº“ | v0.1.0+ | [README#Rule-File](../Code/dynatrace-mcp/README.md#rule-file) |

### 4. Model å…¼å®¹æ€§

| èƒ½åŠ›æ¨¡å— | å…·ä½“åŠŸèƒ½é¡¹ | æ˜¯å¦æ”¯æŒ | è¯¦ç»†è¯´æ˜ | ç‰ˆæœ¬é™åˆ¶ | å®˜æ–¹æ–‡æ¡£é“¾æ¥ |
|----------|-----------|----------|----------|----------|-------------|
| **å®˜æ–¹æ”¯æŒæ¨¡å‹** | å·²éªŒè¯çš„ AI æ¨¡å‹ | âœ… | **ç›´æ¥æ”¯æŒ**ï¼ˆé€šè¿‡å®˜æ–¹å®¢æˆ·ç«¯ï¼‰ï¼š<br>1. Anthropic Claude 3/3.5 (Claude Desktop)<br>2. OpenAI GPT-4 (GitHub Copilot, Cursor)<br>3. Google Gemini 1.5 Pro (Gemini CLI)<br>4. Amazon Q Developer<br>5. Microsoft Copilot (VS Code)<br><br>**ç†è®ºæ”¯æŒ**ï¼ˆé€šè¿‡ MCP åè®®ï¼‰ï¼š<br>- ä»»ä½•æ”¯æŒ MCP çš„ AI æ¨¡å‹<br>- æœ¬åœ° LLaMA/Mistralï¼ˆéœ€ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯ï¼‰ | v0.1.0+ | [README#Configuration](../Code/dynatrace-mcp/README.md#configuration) |
| **æ¨¡å‹åˆ‡æ¢** | çµæ´»æ€§ | âœ… | - **æé«˜çµæ´»æ€§** â˜…â˜…â˜…â˜…â˜…<br>- MCP Server ä¸æ¨¡å‹å®Œå…¨è§£è€¦<br>- é€šè¿‡æ›´æ¢ MCP å®¢æˆ·ç«¯åˆ‡æ¢æ¨¡å‹<br>- åŒä¸€æœåŠ¡å™¨å¯åŒæ—¶æœåŠ¡å¤šä¸ªå®¢æˆ·ç«¯/æ¨¡å‹ | v0.1.0+ | N/A |
| **å‡½æ•°è°ƒç”¨è¦æ±‚** | Function Calling | âœ… | - è¦æ±‚æ¨¡å‹æ”¯æŒå·¥å…·è°ƒç”¨ï¼ˆFunction Callingï¼‰<br>- éœ€ç†è§£ JSON Schema æ ¼å¼çš„å·¥å…·å®šä¹‰<br>- æ¨èé•¿ä¸Šä¸‹æ–‡æ¨¡å‹ï¼ˆå¤„ç†å¤§é‡æ—¥å¿—æ•°æ®ï¼‰<br>- æœ€ä½³å®è·µï¼šClaude 3.5 (200K), GPT-4 Turbo (128K), Gemini 1.5 Pro (1M) | v0.1.0+ | N/A |

### 5. è¿æ¥æ–¹å¼

| èƒ½åŠ›æ¨¡å— | å…·ä½“åŠŸèƒ½é¡¹ | æ˜¯å¦æ”¯æŒ | è¯¦ç»†è¯´æ˜ | ç‰ˆæœ¬é™åˆ¶ | å®˜æ–¹æ–‡æ¡£é“¾æ¥ |
|----------|-----------|----------|----------|----------|-------------|
| **æ”¯æŒçš„åè®®** | ä¼ è¾“å±‚åè®® | âœ… | **stdio** (é»˜è®¤)ï¼š<br>- æ ‡å‡†è¾“å…¥/è¾“å‡ºæµé€šä¿¡<br>- é€‚ç”¨äºæœ¬åœ° MCP å®¢æˆ·ç«¯<br>- å•è¿æ¥æ¨¡å¼<br><br>**HTTP** (å¯é€‰)ï¼š<br>- RESTful HTTP API<br>- æ”¯æŒè¿œç¨‹è®¿é—®<br>- æ— çŠ¶æ€è®¾è®¡<br>- å‘½ä»¤ï¼š`--http --port 3000 --host 0.0.0.0`<br><br>**ä¸æ”¯æŒ**ï¼šSSEã€WebSocket | v0.1.0+ (stdio)<br>v0.8.0+ (HTTP) | [README#HTTP-Server-Mode](../Code/dynatrace-mcp/README.md#http-server-mode-alternative) |
| **è¿æ¥æ± ç®¡ç†** | HTTP å®¢æˆ·ç«¯æ±  | âš ï¸ | - ä¾èµ– Dynatrace SDK çš„ HTTP å®¢æˆ·ç«¯<br>- OAuth ä»¤ç‰Œåœ¨å†…å­˜ä¸­å¤ç”¨<br>- æ— æ˜¾å¼è¿æ¥æ± é…ç½®<br>- HTTP æ¨¡å¼ï¼šæ¯ä¸ªè¯·æ±‚åˆ›å»ºæ–°çš„ MCP Server å®ä¾‹ | v0.1.0+ | N/A |
| **æ–­çº¿é‡è¿** | è‡ªåŠ¨é‡è¿æœºåˆ¶ | âš ï¸ | - **stdio æ¨¡å¼**ï¼šç”± MCP å®¢æˆ·ç«¯ç®¡ç†<br>- **HTTP æ¨¡å¼**ï¼šæ— çŠ¶æ€ï¼Œæ— éœ€é‡è¿<br>- **OAuth ä»¤ç‰Œ**ï¼šè‡ªåŠ¨åˆ·æ–°æœºåˆ¶ï¼ˆAuth Code Flowï¼‰<br>- **ç½‘ç»œæ•…éšœ**ï¼šä¾èµ– Dynatrace SDK çš„é‡è¯•é€»è¾‘ | v0.1.0+ | N/A |
| **è¶…æ—¶é…ç½®** | è¯·æ±‚è¶…æ—¶æ§åˆ¶ | âš ï¸ | - DQL æŸ¥è¯¢ä½¿ç”¨è½®è¯¢æœºåˆ¶ï¼ˆæ— ç¡¬è¶…æ—¶ï¼‰<br>- 2ç§’é—´éš”æ£€æŸ¥æŸ¥è¯¢çŠ¶æ€<br>- OAuth ä»¤ç‰Œè¯·æ±‚é»˜è®¤è¶…æ—¶ï¼ˆSDK æ§åˆ¶ï¼‰<br>- æ— ç”¨æˆ·å¯é…ç½®çš„å…¨å±€è¶…æ—¶å‚æ•° | v0.1.0+ | N/A |

### 6. è®¤è¯æˆæƒ

| èƒ½åŠ›æ¨¡å— | å…·ä½“åŠŸèƒ½é¡¹ | æ˜¯å¦æ”¯æŒ | è¯¦ç»†è¯´æ˜ | ç‰ˆæœ¬é™åˆ¶ | å®˜æ–¹æ–‡æ¡£é“¾æ¥ |
|----------|-----------|----------|----------|----------|-------------|
| **è®¤è¯æ–¹å¼** | å¤šç§è®¤è¯ç­–ç•¥ | âœ… | **æ–¹å¼1ï¼šPlatform Token**<br>- ç¯å¢ƒå˜é‡ï¼š`DT_PLATFORM_TOKEN`<br>- æœ€ç®€å•ï¼Œé€‚åˆå¿«é€Ÿæµ‹è¯•<br>- é™åˆ¶ï¼šä¸æ”¯æŒ `environment-api:entities:read`<br><br>**æ–¹å¼2ï¼šOAuth Client Credentials**<br>- ç¯å¢ƒå˜é‡ï¼š`OAUTH_CLIENT_ID` + `OAUTH_CLIENT_SECRET`<br>- éäº¤äº’å¼ï¼Œé€‚åˆè‡ªåŠ¨åŒ–<br>- éœ€åœ¨ Dynatrace UI åˆ›å»º OAuth Client<br><br>**æ–¹å¼3ï¼šOAuth Authorization Code Flow**<br>- ç¯å¢ƒå˜é‡ï¼šä»… `DT_ENVIRONMENT`<br>- äº¤äº’å¼ SSO ç™»å½•ï¼ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼‰<br>- é€‚åˆå¼€å‘ç¯å¢ƒï¼Œç”¨æˆ·å‹å¥½ | v0.1.0+ | [README#Authentication](../Code/dynatrace-mcp/README.md#troubleshooting) |
| **Tokenç®¡ç†** | è‡ªåŠ¨åˆ·æ–°æœºåˆ¶ | âœ… | - **Auth Code Flow**ï¼šè‡ªåŠ¨åˆ·æ–°è¿‡æœŸä»¤ç‰Œ<br>- å†…å­˜ä¸­ç¼“å­˜ä»¤ç‰Œï¼ˆ`globalTokenCache`ï¼‰<br>- åˆ·æ–°ä»¤ç‰Œï¼ˆrefresh_tokenï¼‰å­˜å‚¨åœ¨å†…å­˜<br>- **é™åˆ¶**ï¼šé‡å¯åä»¤ç‰Œä¸¢å¤±ï¼Œéœ€é‡æ–°è®¤è¯<br>- Client Credentialsï¼šæ¯æ¬¡è¯·æ±‚æ–°ä»¤ç‰Œï¼ˆçŸ­æœŸæœ‰æ•ˆï¼‰ | v0.3.0+ | [dynatrace-clients.ts#L132-L156](../Code/dynatrace-mcp/src/authentication/dynatrace-clients.ts#L132-L156) |
| **æƒé™ç²’åº¦** | OAuth Scopes | âœ… | **ç»†ç²’åº¦æƒé™æ§åˆ¶**ï¼š<br>- å…± **15+ OAuth Scopes**<br>- æŒ‰åŠŸèƒ½åŸŸåˆ’åˆ†ï¼š<br>  - Storage (Grail)ï¼š9ä¸ªscopes<br>  - Automationï¼š3ä¸ªscopes<br>  - Davis CoPilotï¼š3ä¸ªscopes<br>  - Othersï¼šemail, settings, entities<br>- å·¥å…·çº§æƒé™æ£€æŸ¥ï¼ˆç¼ºå°‘ scope è¿”å›æ˜ç¡®é”™è¯¯ï¼‰<br>- æ¨èä¸€æ¬¡æ€§æˆäºˆæ‰€æœ‰ scopesï¼ˆé¿å…é‡å¤æˆæƒï¼‰ | v0.1.0+ | [README#Scopes-for-Authentication](../Code/dynatrace-mcp/README.md#scopes-for-authentication) |
| **ä»£ç†æ”¯æŒ** | ä¼ä¸šä»£ç†é…ç½® | âœ… | - æ”¯æŒç¯å¢ƒå˜é‡ï¼š`https_proxy`, `http_proxy`<br>- æ”¯æŒ `no_proxy`ï¼ˆä»…æ—¥å¿—è®°å½•ï¼Œæœªå®Œå…¨å®æ–½ï¼‰<br>- åŸºäº Node.js åŸç”Ÿä»£ç†æ”¯æŒ<br>- å¯åŠ¨æ—¶è‡ªåŠ¨é…ç½® | v0.9.0+ | [README#Proxy-Configuration](../Code/dynatrace-mcp/README.md#proxy-configuration) |

### 7. å®‰å…¨ç‰¹æ€§

| èƒ½åŠ›æ¨¡å— | å…·ä½“åŠŸèƒ½é¡¹ | æ˜¯å¦æ”¯æŒ | è¯¦ç»†è¯´æ˜ | ç‰ˆæœ¬é™åˆ¶ | å®˜æ–¹æ–‡æ¡£é“¾æ¥ |
|----------|-----------|----------|----------|----------|-------------|
| **æ•°æ®åŠ å¯†** | ä¼ è¾“å±‚åŠ å¯† | âœ… | - æ‰€æœ‰ Dynatrace API è°ƒç”¨ä½¿ç”¨ HTTPS<br>- OAuth ä»¤ç‰Œé€šè¿‡ TLS 1.2+ ä¼ è¾“<br>- MCP stdioï¼šæ— åŠ å¯†ï¼ˆæœ¬åœ°é€šä¿¡ï¼‰<br>- MCP HTTPï¼šå»ºè®®é…ç½®åå‘ä»£ç†ï¼ˆNginx + TLSï¼‰ | v0.1.0+ | N/A |
| **å‡­è¯å­˜å‚¨** | æ•æ„Ÿä¿¡æ¯ç®¡ç† | âš ï¸ | - å‡­è¯é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’ï¼ˆæ˜æ–‡ï¼‰<br>- OAuth ä»¤ç‰Œä»…å­˜å‚¨åœ¨å†…å­˜ï¼ˆéæŒä¹…åŒ–ï¼‰<br>- **ä¸æ”¯æŒ**ï¼šSecrets Manager é›†æˆ<br>- **ä¸æ”¯æŒ**ï¼šå‡­è¯åŠ å¯†å­˜å‚¨<br>- æ¨èä½¿ç”¨ Docker Secrets æˆ– Kubernetes Secrets | v0.1.0+ | N/A |
| **æƒé™æ§åˆ¶** | RBAC é›†æˆ | âœ… | - ä¾èµ– Dynatrace å¹³å°çš„ RBAC<br>- OAuth Scopes æ˜ å°„åˆ° Dynatrace æƒé™<br>- æ”¯æŒç§æœ‰/å…¬å…±å·¥ä½œæµæƒé™æ§åˆ¶<br>- æ”¯æŒå›¢é˜Ÿçº§æ‰€æœ‰æƒç®¡ç† | v0.1.0+ | [Dynatrace RBAC](https://docs.dynatrace.com/docs/manage/access-control) |
| **å®¡è®¡æ—¥å¿—** | æ“ä½œè¿½è¸ª | âœ… | **å®¡è®¡èƒ½åŠ›**ï¼š<br>- Dynatrace å¹³å°è®°å½•æ‰€æœ‰ API è°ƒç”¨<br>- é€šè¿‡ User-Agent è¿½è¸ª MCP æœåŠ¡å™¨è°ƒç”¨<br>- DQL æŸ¥è¯¢å®¡è®¡ï¼š`fetch dt.system.events | filter contains(client.client_context, "dynatrace-mcp")`<br>- å†…ç½®é¥æµ‹ï¼ˆOpenKitï¼‰ï¼šå·¥å…·è°ƒç”¨ç»Ÿè®¡ã€é”™è¯¯è¿½è¸ª<br><br>**é™åˆ¶**ï¼š<br>- æœ¬åœ° stderr æ—¥å¿—æœªæŒä¹…åŒ–<br>- æ— ç‹¬ç«‹å®¡è®¡æ—¥å¿—æ–‡ä»¶ | v0.1.0+ | [README#Costs](../Code/dynatrace-mcp/README.md#costs) |
| **è¾“å…¥éªŒè¯** | æ³¨å…¥æ”»å‡»é˜²æŠ¤ | âœ… | - DQL æŸ¥è¯¢é€šè¿‡ Dynatrace API æ‰§è¡Œï¼ˆå‚æ•°åŒ–æŸ¥è¯¢ï¼‰<br>- Zod Schema ä¸¥æ ¼éªŒè¯æ‰€æœ‰è¾“å…¥<br>- é‚®ä»¶æ”¶ä»¶äººé‚®ç®±æ ¼å¼éªŒè¯<br>- å®ä½“ ID æ ¼å¼éªŒè¯<br>- **é™åˆ¶**ï¼šDQL æŸ¥è¯¢æœ¬èº«å¯èƒ½åŒ…å«æ¶æ„ä»£ç ï¼ˆéœ€ç”¨æˆ·å®¡æŸ¥ï¼‰ | v0.1.0+ | N/A |
| **äººå·¥å®¡æ‰¹** | æ•æ„Ÿæ“ä½œç¡®è®¤ | âœ… | - é‚®ä»¶å‘é€éœ€ç”¨æˆ·ç¡®è®¤<br>- Slack æ¶ˆæ¯éœ€ç”¨æˆ·ç¡®è®¤<br>- å·¥ä½œæµåˆ›å»ºéœ€ç”¨æˆ·ç¡®è®¤<br>- é˜²æ­¢ AI æ¨¡å‹æ‰§è¡Œæœªæˆæƒæ“ä½œ<br>- é€šè¿‡ MCP Elicitation API å®ç° | v0.10.0+ | [send_slack_message](../Code/dynatrace-mcp/README.md#L568-L580) |

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šæ€§èƒ½æŒ‡æ ‡è¯¦è§£

### 2.1 æŸ¥è¯¢æ€§èƒ½

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **DQL æŸ¥è¯¢å“åº”æ—¶é—´** | å–å†³äºæ•°æ®é‡ | - ç®€å•æŸ¥è¯¢ï¼ˆ<1GBï¼‰ï¼š1-5ç§’<br>- å¤æ‚æŸ¥è¯¢ï¼ˆ>10GBï¼‰ï¼š10-60ç§’<br>- ä½¿ç”¨è½®è¯¢æœºåˆ¶ï¼Œ2ç§’é—´éš”æ£€æŸ¥çŠ¶æ€ |
| **å®ä½“æŸ¥æ‰¾å»¶è¿Ÿ** | < 2ç§’ | `find_entity_by_name` é€šè¿‡ Smartscape API æŸ¥è¯¢ï¼Œé€šå¸¸ 1-2 ç§’è¿”å› |
| **é—®é¢˜åˆ—è¡¨æŸ¥è¯¢** | < 3ç§’ | `list_problems` æŸ¥è¯¢ `dt.davis.problems`ï¼Œé»˜è®¤ 24 å°æ—¶èŒƒå›´ |
| **æ¼æ´æ‰«æå»¶è¿Ÿ** | < 5ç§’ | `list_vulnerabilities` æŸ¥è¯¢è¿‡å» 30 å¤©ï¼Œå—æ•°æ®é‡å½±å“ |
| **OAuth è®¤è¯å»¶è¿Ÿ** | é¦–æ¬¡ 5-10ç§’ | åŒ…æ‹¬æµè§ˆå™¨æ‰“å¼€ã€ç”¨æˆ·ç™»å½•ã€ä»¤ç‰Œäº¤æ¢ï¼›ç¼“å­˜å < 0.5ç§’ |

### 2.2 ååé‡é™åˆ¶

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **QPSï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰** | æ— ç¡¬æ€§é™åˆ¶ | å— Dynatrace å¹³å° API é…é¢é™åˆ¶ï¼ˆé€šå¸¸ 100-1000 QPSï¼‰ |
| **å¹¶å‘è¿æ¥æ•°** | stdio: 1<br>HTTP: æ— é™åˆ¶ | stdio æ¨¡å¼ä¸ºå•è¿æ¥ï¼›HTTP æ¨¡å¼å— Node.js å†…å­˜é™åˆ¶ |
| **å•æ¬¡æŸ¥è¯¢è®°å½•æ•°** | é»˜è®¤ 100ï¼Œæœ€å¤§ 5000 | `execute_dql` çš„ `recordLimit` å‚æ•° |
| **å•æ¬¡æŸ¥è¯¢æ•°æ®é‡** | é»˜è®¤ 1MBï¼Œå¯é…ç½® | `recordSizeLimitMB` å‚æ•°ï¼Œé˜²æ­¢ OOM |
| **Grail æŸ¥è¯¢é¢„ç®—** | 1000 GB/ä¼šè¯ | `DT_GRAIL_QUERY_BUDGET_GB` ç¯å¢ƒå˜é‡ï¼Œ80% è­¦å‘Šï¼Œ100% é˜»æ­¢ |

### 2.3 èµ„æºæ¶ˆè€—

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **å†…å­˜å ç”¨** | 50-200 MB | ç©ºé—²çŠ¶æ€çº¦ 50MBï¼ŒDQL æŸ¥è¯¢å¤§æ•°æ®é›†æ—¶å¯è¾¾ 200MB+ |
| **CPU å ç”¨** | < 5% (ç©ºé—²)<br>10-30% (æŸ¥è¯¢ä¸­) | å•æ ¸ CPU å ç”¨ï¼ŒNode.js äº‹ä»¶å¾ªç¯æ¨¡å‹ |
| **å¯åŠ¨æ—¶é—´** | 2-5ç§’ | åŒ…æ‹¬ç¯å¢ƒéªŒè¯ã€OAuth è®¤è¯ã€ä¾èµ–åŠ è½½ |
| **Docker é•œåƒå¤§å°** | ~150 MB | åŸºäº node:22-alpine (å¤šé˜¶æ®µæ„å»º) |

### 2.4 å¯é æ€§æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| **å¯ç”¨æ€§ç›®æ ‡** | æ—  SLA | ç¤¾åŒºäº§å“ï¼Œæ— æ­£å¼ä¿éšœ |
| **æ•…éšœæ¢å¤æ—¶é—´** | OAuth ä»¤ç‰Œï¼šè‡ªåŠ¨<br>ç½‘ç»œæ•…éšœï¼šä¾èµ–é‡è¯•<br>è¿›ç¨‹å´©æºƒï¼šéœ€å¤–éƒ¨é‡å¯ | æ¨èä½¿ç”¨ systemd/Docker restart policy |
| **æ•°æ®ä¸€è‡´æ€§** | å¼ºä¸€è‡´æ€§ | å®æ—¶æŸ¥è¯¢ Dynatrace å¹³å°ï¼Œæ— æœ¬åœ°ç¼“å­˜ |
| **å¹‚ç­‰æ€§ä¿éšœ** | éƒ¨åˆ†å·¥å…·å¹‚ç­‰ | `get_*` å·¥å…·å¹‚ç­‰ï¼Œ`create_*` å·¥å…·éå¹‚ç­‰ |

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šé™åˆ¶æ¡ä»¶è¯´æ˜

### 3.1 åŠŸèƒ½é™åˆ¶

| é™åˆ¶é¡¹ | è¯´æ˜ | å½±å“ | è§£å†³æ–¹æ¡ˆ |
|--------|------|------|----------|
| **Platform Token æƒé™ä¸è¶³** | Platform Token ä¸æ”¯æŒ `environment-api:entities:read` scope | `get_ownership` å·¥å…·æ— æ³•ä½¿ç”¨ | ä½¿ç”¨ OAuth Client æ›¿ä»£ |
| **ä»¤ç‰ŒéæŒä¹…åŒ–** | OAuth ä»¤ç‰Œä»…å­˜å‚¨åœ¨å†…å­˜ï¼Œé‡å¯åä¸¢å¤± | æ¯æ¬¡é‡å¯éœ€é‡æ–°è®¤è¯ï¼ˆAuth Code Flowï¼‰ | å®ç°ç£ç›˜æŒä¹…åŒ–ï¼ˆå¾…å¼€å‘ï¼‰ |
| **æ— æ’ä»¶ç³»ç»Ÿ** | ä¸æ”¯æŒè¿è¡Œæ—¶åŠ è½½ç¬¬ä¸‰æ–¹å·¥å…· | æ‰©å±•åŠŸèƒ½éœ€ä¿®æ”¹æºç  | Fork ä»“åº“æˆ–æäº¤ PR |
| **HTTP æ¨¡å¼æ— çŠ¶æ€** | æ¯ä¸ª HTTP è¯·æ±‚åˆ›å»ºæ–° Server å®ä¾‹ | ä»¤ç‰Œç¼“å­˜åœ¨è¯·æ±‚é—´ä¸å…±äº« | ä½¿ç”¨ stdio æ¨¡å¼æˆ–å¤–éƒ¨ä¼šè¯ç®¡ç† |
| **DQL æŸ¥è¯¢éæµå¼** | æŸ¥è¯¢ç»“æœä¸€æ¬¡æ€§è¿”å›ï¼Œå¤§æ•°æ®é›†å¯èƒ½ OOM | å¤„ç† GB çº§æ•°æ®æ—¶å†…å­˜å‹åŠ›å¤§ | é€šè¿‡ `recordLimit` å’Œæ—¶é—´èŒƒå›´æ§åˆ¶ |

### 3.2 æ€§èƒ½é™åˆ¶

| é™åˆ¶é¡¹ | æ•°å€¼ | è¯´æ˜ | å½±å“ |
|--------|------|------|------|
| **DQL æŸ¥è¯¢è®°å½•æ•°ä¸Šé™** | 5000 æ¡ | `recordLimit` æœ€å¤§å€¼ | è¶…è¿‡éœ€åˆ†é¡µæŸ¥è¯¢ |
| **DQL æŸ¥è¯¢å“åº”å¤§å°** | å¯é…ç½®ï¼Œå»ºè®® < 10MB | `recordSizeLimitMB` å‚æ•° | é˜²æ­¢å†…å­˜æº¢å‡º |
| **é‚®ä»¶æ”¶ä»¶äººæ•°é‡** | æœ€å¤š 10 äºº | TO + CC + BCC æ€»å’Œ | Dynatrace Email API é™åˆ¶ |
| **Grail æŸ¥è¯¢é¢„ç®—** | é»˜è®¤ 1000 GB | ä¼šè¯çº§é™åˆ¶ï¼Œå¯é…ç½® | è¶…é¢„ç®—é˜»æ­¢æ–°æŸ¥è¯¢ |
| **å¹¶å‘æŸ¥è¯¢æ•°** | æ— ç¡¬æ€§é™åˆ¶ | å— Dynatrace API é…é¢çº¦æŸ | å»ºè®® < 10 å¹¶å‘ |

### 3.3 å®‰å…¨é™åˆ¶

| é™åˆ¶é¡¹ | è¯´æ˜ | é£é™©ç­‰çº§ | ç¼“è§£æªæ–½ |
|--------|------|----------|----------|
| **ç¯å¢ƒå˜é‡æ˜æ–‡å­˜å‚¨** | `DT_PLATFORM_TOKEN` ç­‰å‡­è¯ä»¥æ˜æ–‡å­˜å‚¨ | ğŸŸ¡ ä¸­ç­‰ | - ä½¿ç”¨æ–‡ä»¶æƒé™é™åˆ¶è®¿é—®<br>- Docker Secrets<br>- Kubernetes Secrets |
| **æ— å‡­è¯åŠ å¯†** | å†…å­˜ä¸­çš„ OAuth ä»¤ç‰ŒæœªåŠ å¯† | ğŸŸ¢ ä½ | ä»¤ç‰Œä»…å­˜åœ¨äºè¿›ç¨‹å†…å­˜ï¼Œé‡å¯åæ¸…é™¤ |
| **DQL æ³¨å…¥é£é™©** | ç”¨æˆ·å¯é€šè¿‡ `execute_dql` æ‰§è¡Œä»»æ„ DQL | ğŸŸ¡ ä¸­ç­‰ | - ä¾èµ– Dynatrace RBAC<br>- äººå·¥å®¡æ‰¹æ•æ„Ÿæ“ä½œ<br>- å®¡è®¡æ—¥å¿—è¿½è¸ª |
| **æ— é€Ÿç‡é™åˆ¶** | MCP å±‚æœªå®æ–½ QPS é™åˆ¶ | ğŸŸ¡ ä¸­ç­‰ | ä¾èµ– Dynatrace å¹³å°é™æµ |
| **é¥æµ‹æ•°æ®å¤–ä¼ ** | é»˜è®¤å¼€å¯ OpenKit é¥æµ‹ | ğŸŸ¢ ä½ | é€šè¿‡ `DT_MCP_DISABLE_TELEMETRY=true` ç¦ç”¨ |

### 3.4 å…¼å®¹æ€§é™åˆ¶

| é™åˆ¶é¡¹ | è¯´æ˜ | å½±å“èŒƒå›´ |
|--------|------|----------|
| **ä»…æ”¯æŒ Dynatrace Platform URL** | ä¸æ”¯æŒ Classic URLï¼ˆ`*.live.dynatrace.com`ï¼‰ | æ—§ç¯å¢ƒç”¨æˆ·æ— æ³•ä½¿ç”¨ |
| **Node.js ç‰ˆæœ¬è¦æ±‚** | éœ€è¦ Node.js 18+ | æ—§ç³»ç»Ÿéœ€å‡çº§ Node.js |
| **Davis CoPilot é™åˆ¶** | éœ€åœ¨ Dynatrace ç¯å¢ƒä¸­æ‰‹åŠ¨å¯ç”¨ Preview åŠŸèƒ½ | AI åŠŸèƒ½å¯èƒ½ä¸å¯ç”¨ |
| **ä»£ç†ä¸å®Œå…¨æ”¯æŒ** | `no_proxy` ç¯å¢ƒå˜é‡æœªå®Œå…¨å®æ–½ | ç‰¹å®šåŸŸåæ— æ³•ç»•è¿‡ä»£ç† |
| **Windows è·¯å¾„é—®é¢˜** | stdio æ¨¡å¼åœ¨ Windows ä¸‹å¯èƒ½éœ€è¦è·¯å¾„è½¬æ¢ | Windows ç”¨æˆ·ä½“éªŒå—å½±å“ |

### 3.5 æˆæœ¬é™åˆ¶

| é™åˆ¶é¡¹ | è¯´æ˜ | é¢„ä¼°æˆæœ¬ | ä¼˜åŒ–å»ºè®® |
|--------|------|----------|----------|
| **Grail æŸ¥è¯¢è´¹ç”¨** | æŒ‰æ‰«æå­—èŠ‚æ•°è®¡è´¹ | $0.001-0.01/GBï¼ˆå–å†³äºåˆåŒï¼‰ | - ç¼©çŸ­æ—¶é—´èŒƒå›´<br>- ä½¿ç”¨ bucket ä¼˜åŒ–<br>- æ·»åŠ ç²¾ç¡®è¿‡æ»¤å™¨ |
| **DQL æŸ¥è¯¢æœªä¼˜åŒ–** | å…¨è¡¨æ‰«æå¯èƒ½äº§ç”Ÿé«˜é¢è´¹ç”¨ | å•æ¬¡æŸ¥è¯¢å¯è¾¾ 100+ GB | - ä½¿ç”¨ `verify_dql` é¢„æ£€<br>- ç›‘æ§ `scanned_bytes` æŒ‡æ ‡ |
| **æ— æˆæœ¬ä¼°ç®—** | æ‰§è¡Œå‰æ— æ³•é¢„ä¼°æŸ¥è¯¢æˆæœ¬ | æ„å¤–è¶…æ”¯é£é™© | è®¾ç½®è¾ƒä½çš„ `DT_GRAIL_QUERY_BUDGET_GB` |
| **ä¼šè¯çº§é¢„ç®—è¿½è¸ª** | é‡å¯åé¢„ç®—é‡ç½® | éš¾ä»¥è·¨ä¼šè¯æ§åˆ¶æˆæœ¬ | ä½¿ç”¨å¤–éƒ¨æˆæœ¬ç®¡ç†å·¥å…· |

### 3.6 è¿ç»´é™åˆ¶

| é™åˆ¶é¡¹ | è¯´æ˜ | å½±å“ | å»ºè®® |
|--------|------|------|------|
| **æ— å¥åº·æ£€æŸ¥ç«¯ç‚¹** | HTTP æ¨¡å¼ç¼ºå°‘ `/health` ç«¯ç‚¹ | è´Ÿè½½å‡è¡¡å™¨éš¾ä»¥æ£€æµ‹æœåŠ¡çŠ¶æ€ | é€šè¿‡è¿›ç¨‹å­˜æ´»æ£€æŸ¥æ›¿ä»£ |
| **æ—¥å¿—æœªæŒä¹…åŒ–** | stderr æ—¥å¿—æœªå†™å…¥æ–‡ä»¶ | æ•…éšœæ’æŸ¥å›°éš¾ | ä½¿ç”¨æ—¥å¿—æ”¶é›†å·¥å…·ï¼ˆå¦‚ journalctlï¼‰ |
| **æ— æ€§èƒ½æŒ‡æ ‡æš´éœ²** | ä¸æ”¯æŒ Prometheus metrics | éš¾ä»¥ç›‘æ§æœåŠ¡æ€§èƒ½ | é€šè¿‡é¥æµ‹æ•°æ®é—´æ¥ç›‘æ§ |
| **æ— æ»šåŠ¨å‡çº§æ”¯æŒ** | å‡çº§éœ€é‡å¯ï¼Œä»¤ç‰Œç¼“å­˜ä¸¢å¤± | æœåŠ¡ä¸­æ–­ | ä½¿ç”¨è“ç»¿éƒ¨ç½²ï¼ˆHTTP æ¨¡å¼ï¼‰ |
| **æ— é›†ç¾¤æ¨¡å¼** | æ— æ³•æ°´å¹³æ‰©å±• | é«˜è´Ÿè½½åœºæ™¯æ€§èƒ½å—é™ | éƒ¨ç½²å¤šä¸ªç‹¬ç«‹å®ä¾‹ + è´Ÿè½½å‡è¡¡ |

---

## ç¬¬å››éƒ¨åˆ†ï¼šç‰ˆæœ¬æ¼”è¿›å†å²

| ç‰ˆæœ¬ | å‘å¸ƒæ—¥æœŸ | å…³é”®å˜æ›´ | å½±å“ |
|------|----------|----------|------|
| **v0.12.0** | 2025-01 | - åºŸå¼ƒ `app-engine:functions:run` scope<br>- æ–°å¢ `send_email` å·¥å…·<br>- ä¼˜åŒ– Grail é¢„ç®—è¿½è¸ª | éœ€æ›´æ–° OAuth scopes é…ç½® |
| **v0.11.0** | 2024-12 | - æ–°å¢ `list_problems` çš„ `timeframe` å’Œ `status` å‚æ•°<br>- æ”¹è¿›é”™è¯¯å¤„ç† | å‘åå…¼å®¹ |
| **v0.10.0** | 2024-11 | - æ–°å¢äººå·¥å®¡æ‰¹æœºåˆ¶ï¼ˆElicitation APIï¼‰<br>- å®‰å…¨æ€§å¢å¼º | æ•æ„Ÿæ“ä½œéœ€ç”¨æˆ·ç¡®è®¤ |
| **v0.9.0** | 2024-10 | - æ–°å¢ä»£ç†é…ç½®æ”¯æŒ<br>- æ”¹è¿›è®¤è¯æµç¨‹ | ä¼ä¸šç¯å¢ƒå‹å¥½ |
| **v0.8.0** | 2024-09 | - æ–°å¢ HTTP Server æ¨¡å¼<br>- å·¥å…·æ³¨é‡Šï¼ˆAnnotationsï¼‰ | æ”¯æŒè¿œç¨‹éƒ¨ç½² |
| **v0.1.0** | 2024-05 | - åˆå§‹ç‰ˆæœ¬<br>- æ ¸å¿ƒ DQL æŸ¥è¯¢åŠŸèƒ½<br>- OAuth è®¤è¯ | é¦–æ¬¡å…¬å¼€å‘å¸ƒ |

---

## ç¬¬äº”éƒ¨åˆ†ï¼šä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Dynatrace MCP Server                      â”‚
â”‚                      (v0.12.0)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MCP Protocol â”‚   â”‚  Dynatrace   â”‚   â”‚   Node.js    â”‚
â”‚    SDK       â”‚   â”‚     SDK      â”‚   â”‚  Runtime     â”‚
â”‚   (^1.8.0)   â”‚   â”‚  (^1.x-5.x)  â”‚   â”‚   (22.17+)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ stdio/HTTP   â”‚   â”‚  Grail API   â”‚   â”‚   OpenKit    â”‚
â”‚  Transport   â”‚   â”‚  (DQL Query) â”‚   â”‚  (Telemetry) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒä¾èµ–è¯´æ˜

| ä¾èµ–é¡¹ | ç”¨é€” | ç‰ˆæœ¬è¦æ±‚ | å¯æ›¿æ¢æ€§ |
|--------|------|----------|----------|
| `@modelcontextprotocol/sdk` | MCP åè®®å®ç° | ^1.8.0 | âŒ æ ¸å¿ƒä¾èµ– |
| `@dynatrace-sdk/client-query` | DQL æŸ¥è¯¢å®¢æˆ·ç«¯ | ^1.18.1 | âŒ æ ¸å¿ƒä¾èµ– |
| `@dynatrace-sdk/client-automation` | Workflow ç®¡ç† | ^5.3.0 | âš ï¸ å¯é€‰ï¼ˆä¸ä½¿ç”¨ Workflow å¯ç§»é™¤ï¼‰ |
| `@dynatrace-sdk/client-davis-copilot` | AI åŠ©æ‰‹é›†æˆ | ^1.0.0 | âš ï¸ å¯é€‰ï¼ˆPreview åŠŸèƒ½ï¼‰ |
| `@dynatrace/openkit-js` | é¥æµ‹æ•°æ®æ”¶é›† | ^4.1.0 | âœ… å¯ç¦ç”¨ |
| `dt-app` | SSO è®¤è¯è¾…åŠ© | ^0.148.1 | âŒ OAuth å¿…éœ€ |
| `commander` | CLI å‚æ•°è§£æ | ^14.0.0 | âœ… å¯æ›¿æ¢ |

---

## ç¬¬å…­éƒ¨åˆ†ï¼šæœ€ä½³å®è·µå»ºè®®

### 6.1 æ€§èƒ½ä¼˜åŒ–

```markdown
âœ… **æ¨èåšæ³•**ï¼š
1. ä½¿ç”¨ç²¾ç¡®çš„æ—¶é—´èŒƒå›´ï¼ˆå¦‚ `from: now()-1h` è€Œé `from: now()-7d`ï¼‰
2. åœ¨ DQL ä¸­æ·»åŠ å®ä½“è¿‡æ»¤å™¨ï¼ˆ`| filter dt.entity.service == "SERVICE-123"`ï¼‰
3. ä¼˜å…ˆä½¿ç”¨ Grail bucketsï¼ˆ`from: bucket("logs", from: now()-1h)`ï¼‰
4. è®¾ç½®åˆç†çš„ `recordLimit`ï¼ˆå¦‚ 100-500ï¼Œé¿å…ä½¿ç”¨ 5000ï¼‰
5. ä½¿ç”¨ `verify_dql` é¢„æ£€æŸ¥è¯¢è¯­æ³•

âŒ **é¿å…åšæ³•**ï¼š
1. å…¨è¡¨æ‰«æï¼ˆå¦‚ `fetch logs | limit 10`ï¼Œæ— æ—¶é—´èŒƒå›´ï¼‰
2. åœ¨å¾ªç¯ä¸­è°ƒç”¨ `execute_dql`ï¼ˆä½¿ç”¨æ‰¹é‡æŸ¥è¯¢æˆ–èšåˆï¼‰
3. æŸ¥è¯¢è¶…å¤§æ—¶é—´èŒƒå›´ï¼ˆå¦‚ 30 å¤©æ—¥å¿—ï¼‰
4. å¿½ç•¥ Grail é¢„ç®—è­¦å‘Šï¼ˆ80% é˜ˆå€¼ï¼‰
```

### 6.2 å®‰å…¨é…ç½®

```markdown
âœ… **æ¨èåšæ³•**ï¼š
1. ä½¿ç”¨ OAuth Client Credentialsï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
2. æœ€å°æƒé™åŸåˆ™ï¼ˆä»…æˆäºˆå¿…éœ€çš„ scopesï¼‰
3. å®šæœŸè½®æ¢ Platform Token
4. å¯ç”¨å®¡è®¡æ—¥å¿—è¿½è¸ª
5. ä½¿ç”¨ Docker Secrets ç®¡ç†å‡­è¯

âŒ **é¿å…åšæ³•**ï¼š
1. åœ¨å…¬å…±ä»“åº“ä¸­ç¡¬ç¼–ç  Token
2. ä½¿ç”¨è¿‡äºå®½æ³›çš„æƒé™ï¼ˆå¦‚ admin æƒé™ï¼‰
3. ç¦ç”¨äººå·¥å®¡æ‰¹ï¼ˆæ•æ„Ÿæ“ä½œï¼‰
4. å¿½ç•¥é¥æµ‹æ•°æ®éšç§é£é™©
```

### 6.3 æˆæœ¬æ§åˆ¶

```markdown
âœ… **æ¨èåšæ³•**ï¼š
1. è®¾ç½®è¾ƒä½çš„ `DT_GRAIL_QUERY_BUDGET_GB`ï¼ˆå¦‚ 100 GBï¼‰
2. å®šæœŸæ‰§è¡Œæˆæœ¬å®¡è®¡ DQL æŸ¥è¯¢
3. ä¼˜åŒ–æŸ¥è¯¢ä½¿ç”¨ bucket
4. ç›‘æ§ `scanned_bytes` æŒ‡æ ‡
5. å¯¹ AI æ¨¡å‹è¿›è¡Œæˆæœ¬æ„è¯†è®­ç»ƒï¼ˆé€šè¿‡ Rule Fileï¼‰

âŒ **é¿å…åšæ³•**ï¼š
1. æ— é™åˆ¶çš„ Grail é¢„ç®—ï¼ˆ`-1`ï¼‰
2. è®© AI è‡ªç”±ç”Ÿæˆæœªä¼˜åŒ–çš„ DQL
3. å¿½ç•¥ "High Data Usage Warning"
```

---

## é™„å½• Aï¼šå·¥å…·è¯¦ç»†å‚æ•°è¡¨

### A.1 execute_dql

| å‚æ•° | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `dqlStatement` | string | âœ… | - | DQL æŸ¥è¯¢è¯­å¥ |
| `recordLimit` | number | âŒ | 100 | æœ€å¤§è¿”å›è®°å½•æ•°ï¼ˆ1-5000ï¼‰ |
| `recordSizeLimitMB` | number | âŒ | 1 | å“åº”å¤§å°é™åˆ¶ï¼ˆMBï¼‰ |

**è¿”å›å­—æ®µ**ï¼š
- `records`: æŸ¥è¯¢ç»“æœæ•°ç»„
- `scannedBytes`: æ‰«æå­—èŠ‚æ•°
- `scannedRecords`: æ‰«æè®°å½•æ•°
- `executionTimeMilliseconds`: æ‰§è¡Œæ—¶é•¿
- `sampled`: æ˜¯å¦ä½¿ç”¨é‡‡æ ·
- `budgetWarning`: é¢„ç®—è­¦å‘Šä¿¡æ¯

### A.2 list_problems

| å‚æ•° | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `timeframe` | string | âŒ | "24h" | æ—¶é—´èŒƒå›´ï¼ˆå¦‚ "12h", "7d"ï¼‰ |
| `status` | enum | âŒ | "ALL" | ACTIVE / CLOSED / ALL |
| `additionalFilter` | string | âŒ | - | é¢å¤– DQL è¿‡æ»¤å™¨ |
| `maxProblemsToDisplay` | number | âŒ | 10 | æœ€å¤§æ˜¾ç¤ºæ•°é‡ï¼ˆ1-5000ï¼‰ |

### A.3 list_vulnerabilities

| å‚æ•° | ç±»å‹ | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| `riskScore` | number | âŒ | 8.0 | æœ€ä½é£é™©è¯„åˆ† |
| `additionalFilter` | string | âŒ | - | é¢å¤– DQL è¿‡æ»¤å™¨ |
| `maxVulnerabilitiesToDisplay` | number | âŒ | 25 | æœ€å¤§æ˜¾ç¤ºæ•°é‡ |

---

## é™„å½• Bï¼šOAuth Scopes å®Œæ•´æ¸…å•

| Scope | ç”¨é€” | å¿…éœ€å·¥å…· | æ›¿ä»£æ–¹æ¡ˆ |
|-------|------|----------|----------|
| `app-engine:apps:run` | è¿è¡Œ App Engine åº”ç”¨ | å‡ ä¹æ‰€æœ‰å·¥å…· | æ—  |
| `storage:logs:read` | è¯»å–æ—¥å¿— | execute_dql | æ—  |
| `storage:metrics:read` | è¯»å–æŒ‡æ ‡ | execute_dql | æ—  |
| `storage:spans:read` | è¯»å– Spans | execute_dql | æ—  |
| `storage:events:read` | è¯»å–äº‹ä»¶ | execute_dql, list_problems | æ—  |
| `storage:buckets:read` | è¯»å–æ‰€æœ‰ Grail æ•°æ® | execute_dql | æ—  |
| `storage:entities:read` | è¯»å–å®ä½“ | execute_dql | æ—  |
| `storage:smartscape:read` | è¯»å– Smartscape | find_entity_by_name | æ—  |
| `storage:security.events:read` | è¯»å–å®‰å…¨äº‹ä»¶ | list_vulnerabilities | æ—  |
| `storage:system:read` | è¯»å–ç³»ç»Ÿæ•°æ® | execute_dql | æ—  |
| `storage:bizevents:read` | è¯»å–ä¸šåŠ¡äº‹ä»¶ | execute_dql | æ—  |
| `storage:user.events:read` | è¯»å–ç”¨æˆ·äº‹ä»¶ | execute_dql | æ—  |
| `storage:user.sessions:read` | è¯»å–ç”¨æˆ·ä¼šè¯ | execute_dql | æ—  |
| `settings:objects:read` | è¯»å–è®¾ç½®å¯¹è±¡ | get_ownership | app-settings:objects:read (ä¸æ¨è) |
| `environment-api:entities:read` | è¯»å–å®ä½“ï¼ˆç¯å¢ƒ APIï¼‰ | get_ownership | æ— ï¼ˆPlatform Token ä¸æ”¯æŒï¼‰ |
| `automation:workflows:read` | è¯»å–å·¥ä½œæµ | create_workflow_* | æ—  |
| `automation:workflows:write` | åˆ›å»º/ä¿®æ”¹å·¥ä½œæµ | create_workflow_* | æ—  |
| `automation:workflows:run` | è¿è¡Œå·¥ä½œæµ | create_workflow_* | æ—  |
| `davis-copilot:nl2dql:execute` | è‡ªç„¶è¯­è¨€è½¬ DQL | generate_dql_from_natural_language | æ—  |
| `davis-copilot:dql2nl:execute` | DQL è½¬è‡ªç„¶è¯­è¨€ | explain_dql_in_natural_language | æ—  |
| `davis-copilot:conversations:execute` | Davis CoPilot å¯¹è¯ | chat_with_davis_copilot | æ—  |
| `email:emails:send` | å‘é€é‚®ä»¶ | send_email | æ—  |

---

## é™„å½• Cï¼šé”™è¯¯ä»£ç é€ŸæŸ¥è¡¨

| é”™è¯¯ç±»å‹ | é”™è¯¯ä»£ç /æ¶ˆæ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|----------|--------------|------|----------|
| **è®¤è¯é”™è¯¯** | `Failed to retrieve OAuth token` | OAuth Client é…ç½®é”™è¯¯æˆ– scopes ä¸è¶³ | æ£€æŸ¥ Client ID/Secretï¼Œè¡¥å…… scopes |
| **é¢„ç®—è¶…é™** | `Grail Budget Exceeded` | ä¼šè¯æŸ¥è¯¢å­—èŠ‚æ•°è¶…è¿‡ `DT_GRAIL_QUERY_BUDGET_GB` | è°ƒç”¨ `reset_grail_budget` æˆ–é‡å¯æœåŠ¡ |
| **æƒé™ä¸è¶³** | `Missing required scope: ...` | OAuth Token ç¼ºå°‘å¿…éœ€çš„æƒé™ | åœ¨ Dynatrace UI ä¸­æ·»åŠ  scope å¹¶é‡æ–°æˆæƒ |
| **æŸ¥è¯¢è¶…é™** | `Record Limit Reached` | DQL ç»“æœè¶…è¿‡ `recordLimit` | å¢å¤§ `recordLimit` æˆ–ä¼˜åŒ–æŸ¥è¯¢ |
| **DQL è¯­æ³•é”™è¯¯** | `Parse error` / `Invalid syntax` | DQL è¯­å¥è¯­æ³•é”™è¯¯ | ä½¿ç”¨ `verify_dql` æˆ– `generate_dql_from_natural_language` |
| **ç½‘ç»œé”™è¯¯** | `Failed to connect to Dynatrace` | ç½‘ç»œä¸å¯è¾¾æˆ–ä»£ç†é…ç½®é”™è¯¯ | æ£€æŸ¥ `DT_ENVIRONMENT` URL å’Œä»£ç†é…ç½® |
| **å®ä½“ä¸å­˜åœ¨** | `No monitored entity found` | å®ä½“åç§°é”™è¯¯æˆ–å®ä½“æœªç›‘æ§ | ä½¿ç”¨æ¨¡ç³ŠåŒ¹é…æˆ–æ‰©å±•æœç´¢ï¼ˆ`extendedSearch: true`ï¼‰ |
| **Davis CoPilot ä¸å¯ç”¨** | `The conversation skill is not available` | Davis CoPilot æœªåœ¨ç¯å¢ƒä¸­å¯ç”¨ | è®¿é—® Dynatrace UI å¯ç”¨ Preview åŠŸèƒ½ |
